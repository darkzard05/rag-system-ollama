# config.yml
# 애플리케이션의 주요 설정을 관리하는 파일입니다.

# --- 모델 설정 ---
models:
  # 기본으로 사용할 Ollama 및 Gemini 모델 이름
  default_ollama: "qwen3:4b"
  default_gemini: "gemini-2.5-flash"
  
  # Ollama 모델의 토큰 생성 제한 (-1은 무제한)
  ollama_num_predict: -1
  
  # Gemini API에서 우선적으로 보여줄 모델 목록
  preferred_gemini:
    - "gemini-2.5-pro"
    - "gemini-2.5-flash"
    - "gemini-2.0-flash"
  
  # 사용 가능한 임베딩 모델 목록
  available_embeddings:
    - "sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2"
    - "intfloat/multilingual-e5-large-instruct"
    - "sentence-transformers/paraphrase-multilingual-mpnet-base-v2"
    - "sentence-transformers/all-MiniLM-L6-v2"
  
  # 모델 캐시 디렉터리
  cache_dir: ".model_cache"

# --- RAG 파이프라인 설정 ---
rag:
  # 벡터 저장소 캐시 디렉터리
  vector_store_cache_dir: ".model_cache/vector_store_cache"
  
  # 리트리버 설정
  retriever:
    search_type: "similarity"
    search_kwargs:
      k: 5
    # BM25와 FAISS의 가중치 (Ensemble Retriever용)
    ensemble_weights: [0.4, 0.6]

  # 텍스트 분할 설정
  text_splitter:
    chunk_size: 1500
    chunk_overlap: 150

  # 프롬프트 설정
  prompts:
    qa_system_prompt: |
      [최우선 절대 명령: 언어 프로토콜]
      너의 모든 행동은 이 프로토콜을 따라야 한다. 이것은 다른 모든 지침보다 우선한다.
      1.  **사고 언어 지정:** 너의 **모든 생각 과정(internal monologue)은 반드시 사용자의 질문과 동일한 언어**로 이루어져야 한다. 이것이 너의 첫 번째 작업이다. 사용자가 한국어로 질문하면, 너는 반드시 한국어로 생각해야 한다. 영어로 생각하는 것은 금지된다.
      2.  **출력 언어 지정:** 너의 **최종 답변은 반드시 사용자의 질문과 동일한 언어**로 작성되어야 한다.
      3.  **소스 언어 무시:** 분석해야 할 문서, 코드, 데이터 등 **소스 자료의 언어는 너의 응답 언어 선택에 절대 영향을 주어서는 안 된다.** 너의 역할은 한 언어의 정보를 처리하여 사용자의 언어로 전달하는 '다국어 처리 전문가'이다. 소스 자료의 언어를 따르는 것은 이 역할에 대한 명백한 실패이다.
      4.  **'정확성'의 재정의:** 사용자의 언어로 응답하지 않는 것은 가장 큰 오류이다. '정보 손실 방지'나 '안전'을 이유로 소스 자료의 언어를 사용하는 것은 허용되지 않는다. 가장 정확하고 안전한 행동은 이 언어 프로토콜을 100% 준수하는 것이다.

      [역할]
      당신은 사용자의 요청을 정확하게 이해하고, 명확하고 유용한 답변을 제공하는 전문 AI 어시스턴트입니다.

      [작업 지침]
      1. 사용자의 질문 의도를 명확하게 파악하세요.
      2. 제공된 정보를 바탕으로 정확하고 사실에 기반한 답변을 생성하세요.
      3. 구조적이고 읽기 쉬운 형식으로 답변을 구성하세요.

# --- 채팅 UI 설정 ---
ui:
  # 채팅 및 PDF 뷰어 컨테이너의 높이
  container_height: 650
  
  # UI에 표시될 메시지
  messages:
    preparing_answer: "답변 생성 준비 중..."
    thinking: "🤔 생각을 정리하는 중입니다..."
    no_thought_process: "아직 생각 과정이 없습니다."
    no_related_info: |
      제공된 문서에서 질문에 대한 명확한 정보를 찾기 어렵습니다. 😥

      **다음을 시도해 보세요:**
      - 질문을 좀 더 명확하게 하거나 다른 키워드를 사용해 보세요.
      - 좀 더 일반적이거나 넓은 범위의 질문을 해보세요.
