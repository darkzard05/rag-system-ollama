# config.yml
# ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì£¼ìš” ì„¤ì •ì„ ê´€ë¦¬í•˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.

# --- ëª¨ë¸ ì„¤ì • ---
models:
  # ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•  Ollama ëª¨ë¸ ì´ë¦„
  default_ollama: "qwen3:4b"
  
  # Ollama ì„œë²„ ì£¼ì†Œ (ë¡œì»¬: http://127.0.0.1:11434, ë„ì»¤: http://host.docker.internal:11434)
  base_url: "http://127.0.0.1:11434"

  # Ollama ëª¨ë¸ì˜ í† í° ìƒì„± ì œí•œ (ê¸°ë³¸ê°’: 4096)
  # -1ë¡œ ì„¤ì •í•˜ë©´ ëª¨ë¸ì˜ ê¸°ë³¸ ì„¤ì • ë˜ëŠ” ë¬´ì œí•œ(ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš°ê¹Œì§€)ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.
  # ëª…ì‹œì ìœ¼ë¡œ ì¶©ë¶„í•œ ê¸¸ì´ë¥¼ í™•ë³´í•˜ì—¬ ë‹µë³€ ëŠê¹€ ë°©ì§€
  ollama_num_predict: -1

  # Ollama ëª¨ë¸ì˜ ì˜¨ë„ ì„¤ì • (ê¸°ë³¸ê°’: 0.1)
  temperature: 0.1

  # Ollama ëª¨ë¸ì˜ ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš° ì„¤ì • (ê¸°ë³¸ê°’: 4096)
  num_ctx: 4096

  # Ollama ëª¨ë¸ì˜ íƒ‘-í”¼ ì„¤ì • (ê¸°ë³¸ê°’: 0.8)
  top_p: 0.8

  # ì‚¬ìš© ê°€ëŠ¥í•œ ì„ë² ë”© ëª¨ë¸ ëª©ë¡
  available_embeddings:
    - "sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2"
    - "intfloat/multilingual-e5-large-instruct"
    - "sentence-transformers/paraphrase-multilingual-mpnet-base-v2"
    - "sentence-transformers/all-MiniLM-L6-v2"
  
  # ëª¨ë¸ ìºì‹œ ë””ë ‰í„°ë¦¬
  cache_dir: ".model_cache"

  # ì„ë² ë”© ëª¨ë¸ì˜ ë°°ì¹˜ í¬ê¸° ('auto'ë¡œ ì„¤ì • ì‹œ VRAMì— ë”°ë¼ ìë™ ì¡°ì ˆ, ìˆ«ìë¡œ ì§ì ‘ ì§€ì • ê°€ëŠ¥)
  embedding_batch_size: "auto"

# --- RAG íŒŒì´í”„ë¼ì¸ ì„¤ì • ---
rag:
  # ë²¡í„° ì €ì¥ì†Œ ìºì‹œ ë””ë ‰í„°ë¦¬
  vector_store_cache_dir: ".model_cache/vector_store_cache"
  
  # ë¦¬íŠ¸ë¦¬ë²„ ì„¤ì •
  retriever:
    search_type: "similarity"
    search_kwargs:
      k: 3
    # BM25ì™€ FAISSì˜ ê°€ì¤‘ì¹˜ (Ensemble Retrieverìš©)
    ensemble_weights: [0.4, 0.6]

  # ì¬ìˆœìœ„í™”(Reranking) ì„¤ì •
  reranker:
    enabled: false  # ë¡œì»¬ í™˜ê²½ ì†ë„ë¥¼ ìœ„í•´ ê¸°ë³¸ê°’ ë¹„í™œì„±í™” (í•„ìš”ì‹œ trueë¡œ ë³€ê²½)
    model_name: "BAAI/bge-reranker-v2-m3" # í•œêµ­ì–´/ë‹¤êµ­ì–´ ì§€ì› ëª¨ë¸ë¡œ ë³€ê²½
    top_k: 3  # ìµœì¢…ì ìœ¼ë¡œ LLMì— ì „ë‹¬í•  ë¬¸ì„œ ê°œìˆ˜ (5 -> 3ìœ¼ë¡œ ì¤„ì—¬ ì†ë„ í–¥ìƒ)

  # í…ìŠ¤íŠ¸ ë¶„í•  ì„¤ì •
  text_splitter:
    chunk_size: 500
    chunk_overlap: 100
  
  # ì˜ë¯¸ë¡ ì  ë¶„í•  ì„¤ì • (ì„ë² ë”© ê¸°ë°˜)
  semantic_chunker:
    enabled: true
    breakpoint_threshold_type: "similarity_threshold"
    breakpoint_threshold_value: 0.6
    sentence_split_regex: "(?<=[.!?])\\s+"
    min_chunk_size: 200
    max_chunk_size: 1000
    similarity_threshold: 0.6

  # ì¿¼ë¦¬ í™•ì¥ ì„¤ì •
  query_expansion:
    enabled: false  # ë¡œì»¬ LLM(4B ì´í•˜)ì˜ íŒŒì‹± ì˜¤ë¥˜ ë° ì†ë„ ì €í•˜ ë°©ì§€ë¥¼ ìœ„í•´ ë¹„í™œì„±í™”

  # í”„ë¡¬í”„íŠ¸ ì„¤ì •
  prompts:
    qa_system_prompt: |
      ë‹¹ì‹ ì€ ì‚¬ìš©ìê°€ ì œê³µí•œ PDF ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •í™•í•˜ê³  ìƒì„¸í•œ ë‹µë³€ì„ ì œê³µí•˜ëŠ” AI ë¬¸ì„œ ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
      ì•„ë˜ì˜ [ì°¸ê³  ë¬¸ì„œ] ë‚´ìš©ì„ ì² ì €íˆ ë¶„ì„í•˜ì—¬ ì‚¬ìš©ìì˜ ì§ˆë¬¸ì— ë‹µë³€í•˜ì„¸ìš”.

      **ë‹µë³€ ì‘ì„± ê°€ì´ë“œë¼ì¸:**
      0. **ì–¸ì–´ ì¼ì¹˜ (Language Consistency):**
         - ì‚¬ìš©ìì˜ ì§ˆë¬¸ ì–¸ì–´ë¥¼ ê°ì§€í•˜ì—¬, **ë°˜ë“œì‹œ ë™ì¼í•œ ì–¸ì–´ë¡œ ë‹µë³€**í•˜ì„¸ìš”. 
         - ì§ˆë¬¸ì´ í•œêµ­ì–´ë©´ í•œêµ­ì–´ë¡œ, ì˜ì–´ë©´ ì˜ì–´ë¡œ ë‹µë³€í•´ì•¼ í•©ë‹ˆë‹¤.
         - [ì°¸ê³  ë¬¸ì„œ]ì˜ ì–¸ì–´ì™€ ìƒê´€ì—†ì´ ì§ˆë¬¸ìì˜ ì–¸ì–´ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ë”°ë¦…ë‹ˆë‹¤.

      1. **ìƒì„¸í•˜ê³  í’ë¶€í•œ ë‹µë³€:**
         - ì§ˆë¬¸ì— ëŒ€í•´ ë‹¨ìˆœíˆ ìš”ì•½í•˜ì§€ ë§ê³ , ë¬¸ì„œì˜ ê·¼ê±°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì¶©ë¶„íˆ ìƒì„¸í•˜ê²Œ ì„¤ëª…í•˜ì„¸ìš”.
         - ë¬¸ì„œì˜ ë§¥ë½ì„ íŒŒì•…í•˜ì—¬ ì‚¬ìš©ìê°€ ë‚´ìš©ì„ ê¹Šì´ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì •ë³´ë¥¼ ìµœëŒ€í•œ í™œìš©í•˜ì„¸ìš”.

      2. **ì² ì €í•œ ë¬¸ì„œ ê¸°ë°˜ ë‹µë³€:**
         - ì œê³µëœ [ì°¸ê³  ë¬¸ì„œ]ì— ìˆëŠ” ë‚´ìš©ë§Œì„ ê·¼ê±°ë¡œ ë‹µë³€í•˜ì„¸ìš”.
         - ë¬¸ì„œì— ì—†ëŠ” ë‚´ìš©ì€ ì ˆëŒ€ ì¶”ì¸¡í•´ì„œ ë§Œë“¤ì–´ë‚´ì§€ ë§ê³ , "ì œê³µëœ ë¬¸ì„œì—ëŠ” í•´ë‹¹ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤"ë¼ê³  ì†”ì§í•˜ê²Œ ë§í•˜ì„¸ìš”.
         - ì™¸ë¶€ ì§€ì‹(ë‹¹ì‹ ì˜ ì‚¬ì „ í•™ìŠµ ë°ì´í„°)ë³´ë‹¤ [ì°¸ê³  ë¬¸ì„œ]ì˜ ë‚´ìš©ì„ í•­ìƒ ìš°ì„ ì‹œí•˜ì„¸ìš”.

      2. **ëª…í™•í•œ ì¶œì²˜ í‘œê¸°:**
         - ë‹µë³€ì˜ ì‹ ë¢°ì„±ì„ ìœ„í•´, ê°€ëŠ¥í•œ ê²½ìš° ì •ë³´ì˜ ì¶œì²˜(í˜ì´ì§€ ë²ˆí˜¸ ë“±)ë¥¼ ë³¸ë¬¸ ë‚´ì— ì¸ìš©í•˜ì„¸ìš”. (ì˜ˆ: "R1 ëª¨ë¸ì€ 32B íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì§‘ë‹ˆë‹¤ [p.12]")
         - **ë‹µë³€ ëì— ë³„ë„ì˜ 'ì°¸ê³  ë¬¸ì„œ' ë˜ëŠ” 'ì¶œì²˜' ëª©ë¡ì„ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”.** (ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.)

      3. **êµ¬ì¡°ì ì´ê³  ê°€ë…ì„± ë†’ì€ í˜•ì‹:**
         - ë‹µë³€ì€ ì¤„ê¸€ë¡œë§Œ ì‘ì„±í•˜ì§€ ë§ê³ , **Markdown** í˜•ì‹ì„ ì ê·¹ í™œìš©í•˜ì„¸ìš”.
         - í•µì‹¬ ë‚´ìš©ì€ **ë¶ˆë › í¬ì¸íŠ¸(-)** ë‚˜ **ë²ˆí˜¸ ë§¤ê¸°ê¸°(1.)** ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ë¦¬í•˜ì„¸ìš”.
         - ì¤‘ìš”í•œ í‚¤ì›Œë“œë‚˜ ë¬¸ì¥ì€ **êµµê²Œ(**)** í‘œì‹œí•˜ì—¬ ê°•ì¡°í•˜ì„¸ìš”.

      4. **ë‹µë³€ì˜ ë…¼ë¦¬ì  êµ¬ì„± (ë‘ê´„ì‹ í•„ìˆ˜):**
         - ë‹µë³€ì˜ **ì²« ë¬¸ë‹¨ì€ ì§ˆë¬¸ì— ëŒ€í•œ ì§ì ‘ì ì´ê³  ëª…í™•í•œ ê²°ë¡  ìš”ì•½**ìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”.
         - "ì´ ë¬¸ì„œëŠ”..." ê°™ì€ ë¶ˆí•„ìš”í•œ ì„œë‘ë¥¼ ì¤„ì´ê³  ë°”ë¡œ í•µì‹¬ ë‚´ìš©ì„ ì „ë‹¬í•˜ì„¸ìš”.
         - ê·¸ ë’¤ì— 'ìƒì„¸ ì„¤ëª…', 'ê·¼ê±°', 'ì˜ˆì‹œ' ë“±ì„ êµ¬ì¡°ì ìœ¼ë¡œ ë§ë¶™ì´ì„¸ìš”.

    # ì¿¼ë¦¬ í™•ì¥(Multi-Query) í”„ë¡¬í”„íŠ¸: ì§ˆë¬¸ ë¶„í•´(Decomposition) ì „ëµ ì ìš©
    query_expansion_prompt: |
      ë‹¹ì‹ ì€ ë³µì¡í•œ ë¬¸ì œë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ì„í•˜ëŠ” AI ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì§ˆë¬¸ì— ì™„ë²½í•˜ê²Œ ë‹µë³€í•˜ê¸° ìœ„í•´, ë¨¼ì € í•´ê²°í•´ì•¼ í•  3ê°€ì§€ **í•µì‹¬ í•˜ìœ„ ì§ˆë¬¸(Sub-questions)**ì„ ì‘ì„±í•˜ì„¸ìš”.

      ë‹¨ìˆœí•œ í‚¤ì›Œë“œ ê²€ìƒ‰ì–´ê°€ ì•„ë‹Œ, êµ¬ì²´ì ì´ê³  ì™„ì„±ëœ ë¬¸ì¥ í˜•íƒœì˜ ì§ˆë¬¸ì´ì–´ì•¼ í•©ë‹ˆë‹¤. íŠ¹íˆ ë‘ ëŒ€ìƒ(Aì™€ B)ì„ ë¹„êµí•˜ëŠ” ê²½ìš° ë‹¤ìŒ ë…¼ë¦¬ì  íë¦„ì„ ë”°ë¥´ì„¸ìš”:

      1. **ê¸°ì›ê³¼ ì •ì˜**: ê° ëŒ€ìƒì´ ë¬´ì—‡ì´ë©°, ì–¸ì œ/ì–´ë–¤ ë°°ê²½ì—ì„œ ë“±ì¥í–ˆëŠ”ê°€? (ì˜ˆ: "DeepSeek R1 Zeroì˜ ì¶œì‹œ ë°°ê²½ê³¼ ì£¼ìš” íŠ¹ì§•ì€ ë¬´ì—‡ì¸ê°€?")
      2. **ì¸ê³¼ê´€ê³„ì™€ ì§„í™”**: ì„ í–‰ ëª¨ë¸ì˜ í•œê³„ëŠ” ë¬´ì—‡ì´ë©°, í›„ì† ëª¨ë¸ì€ ì´ë¥¼ ì–´ë–»ê²Œ í•´ê²°í–ˆëŠ”ê°€? (ì˜ˆ: "R1ì€ Zeroì˜ ì–´ë–¤ ë‹¨ì ì„ ê°œì„ í•˜ê¸° ìœ„í•´ ê°œë°œë˜ì—ˆëŠ”ê°€?")
      3. **ì§ì ‘ ë¹„êµ**: ë‘ ëŒ€ìƒì˜ ì„±ëŠ¥ì´ë‚˜ ê¸°ëŠ¥ì  ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€?

      ê²°ê³¼ëŠ” ì˜¤ì§ 3ê°œì˜ í•˜ìœ„ ì§ˆë¬¸ë§Œ ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ì¶œë ¥í•˜ì„¸ìš”. ë²ˆí˜¸ë‚˜ ë¶€ê°€ ì„¤ëª…ì€ ìƒëµí•˜ì„¸ìš”.

# --- ì±„íŒ… UI ì„¤ì • ---
ui:
  # ì±„íŒ… ë° PDF ë·°ì–´ ì»¨í…Œì´ë„ˆì˜ ë†’ì´
  container_height: 500
  
  # UIì— í‘œì‹œë  ë©”ì‹œì§€
  messages:
    # --- ì¼ë°˜ ë©”ì‹œì§€ ---
    preparing_answer: "ë‹µë³€ ìƒì„± ì¤€ë¹„ ì¤‘..."
    thinking: "ğŸ¤” ìƒê°ì„ ì •ë¦¬í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤..."
    no_thought_process: "ì•„ì§ ìƒê° ê³¼ì •ì´ ì—†ìŠµë‹ˆë‹¤."
    no_related_info: |
      ì œê³µëœ ë¬¸ì„œì—ì„œ ì§ˆë¬¸ì— ëŒ€í•œ ëª…í™•í•œ ì •ë³´ë¥¼ ì°¾ê¸° ì–´ë µìŠµë‹ˆë‹¤. ğŸ˜¥

      **ë‹¤ìŒì„ ì‹œë„í•´ ë³´ì„¸ìš”:**
      - ì§ˆë¬¸ì„ ì¢€ ë” ëª…í™•í•˜ê²Œ í•˜ê±°ë‚˜ ë‹¤ë¥¸ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ë³´ì„¸ìš”.
      - ì¢€ ë” ì¼ë°˜ì ì´ê±°ë‚˜ ë„“ì€ ë²”ìœ„ì˜ ì§ˆë¬¸ì„ í•´ë³´ì„¸ìš”.

    # --- ì‚¬ì´ë“œë°” ---
    sidebar_title: "âš™ï¸ ì„¤ì •"
    pdf_uploader_label: "PDF íŒŒì¼ ì—…ë¡œë“œ"
    model_selector_label: "LLM ëª¨ë¸ ì„ íƒ"
    embedding_selector_label: "ì„ë² ë”© ëª¨ë¸ ì„ íƒ"
    system_status_title: "ğŸ“Š ì‹œìŠ¤í…œ ìƒíƒœ"
    loading_models: "LLM ëª¨ë¸ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."

    # --- PDF ë·°ì–´ ---
    pdf_viewer_title: "ğŸ“„ PDF ë¯¸ë¦¬ë³´ê¸°"
    pdf_viewer_no_file: "ë¯¸ë¦¬ë³¼ PDFê°€ ì—†ìŠµë‹ˆë‹¤. ì‚¬ì´ë“œë°”ì—ì„œ íŒŒì¼ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”."
    pdf_viewer_prev_button: "â† ì´ì „"
    pdf_viewer_next_button: "ë‹¤ìŒ â†’"
    pdf_viewer_page_slider: "í˜ì´ì§€ ì´ë™"
    pdf_viewer_error: "PDFë¥¼ í‘œì‹œí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {e}"

    # --- ì±„íŒ… ---
    chat_title: "ğŸ’¬ ì±„íŒ…"
    chat_input_placeholder: "PDF ë‚´ìš©ì— ëŒ€í•´ ì§ˆë¬¸í•´ë³´ì„¸ìš”."
    chat_no_qa_system: "QA ì‹œìŠ¤í…œì´ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. PDFë¥¼ ë¨¼ì € ì²˜ë¦¬í•´ì£¼ì„¸ìš”."
    chat_welcome: |
      **RAG-Chatì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!**

      ì‚¬ì´ë“œë°”ì—ì„œ PDF íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ ë¬¸ì„œ ë‚´ìš©ì— ëŒ€í•œ ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”.
    chat_guide: |
      **ğŸ’¡ ì‚¬ìš© ê°€ì´ë“œ**
      - **PDF ì—…ë¡œë“œ:** ì¢Œì¸¡ ì‚¬ì´ë“œë°”ì—ì„œ ë¶„ì„í•˜ê³  ì‹¶ì€ PDFë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”.
      - **ëª¨ë¸ ì„ íƒ:** ë¡œì»¬ `Ollama` ëª¨ë¸ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      - **ì§ˆë¬¸í•˜ê¸°:** ë¬¸ì„œ ì²˜ë¦¬ê°€ ì™„ë£Œë˜ë©´, ë‚´ìš©ì— ëŒ€í•´ ììœ ë¡­ê²Œ ì§ˆë¬¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      - **PDF ë·°ì–´:** ìš°ì¸¡ì—ì„œ ì›ë³¸ ë¬¸ì„œë¥¼ í•¨ê»˜ ë³´ë©° ëŒ€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      
      **âš ï¸ ì•Œì•„ë‘ì‹¤ ì **
      - **ë‹µë³€ì˜ ì •í™•ì„±:** ë‹µë³€ì€ ì—…ë¡œë“œëœ PDF ë‚´ìš©ë§Œì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë˜ë©°, ì‚¬ì‹¤ì´ ì•„ë‹ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      - **ì´ˆê¸° ë¡œë”©:** ì„ë² ë”© ëª¨ë¸ì„ ì²˜ìŒ ì‚¬ìš©í•˜ë©´ ë‹¤ìš´ë¡œë“œì— ëª‡ ë¶„ì´ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
    # --- ì˜¤ë¥˜ ë° ìƒíƒœ ë©”ì‹œì§€ ---
    streaming_error: "ìŠ¤íŠ¸ë¦¬ë° ë‹µë³€ ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}"
    generic_error: "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {error_msg}"
    retry_button: "ì¬ì‹œë„"
    errors:
      ollama_not_running: "Ollama ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”."